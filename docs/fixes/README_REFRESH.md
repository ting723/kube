# 动态刷新功能使用指南

## 功能概述

Kube TUI 现在支持更智能的动态刷新功能，可以自动更新各种内容，同时提供精细的控制选项。

## 刷新类型

### 1. 全局刷新控制
- **按键**: `A` (在非日志模式下)
- **功能**: 启用/禁用所有自动刷新功能
- **状态显示**: 在命令行底部显示刷新状态

### 2. 列表刷新 (默认启用)
- **内容**: Pod、Service、Deployment等资源列表
- **间隔**: 5秒
- **自动**: 当数据为空或超过刷新间隔时自动刷新

### 3. 日志刷新
- **按键**: `R` (在日志模式下)
- **间隔**: 2秒
- **功能**: 模拟 `kubectl logs -f` 的尾随效果
- **自动滚动**: `A` 键切换是否自动滚动到最新日志

### 4. Describe内容刷新 (新增)
- **按键**: `R` (在Describe模式下)
- **功能**: 自动刷新资源的详细描述信息
- **默认**: 关闭 (避免过度请求)

### 5. YAML内容刷新 (新增)
- **按键**: `R` (在YAML模式下) 
- **功能**: 自动刷新资源的YAML配置
- **默认**: 关闭 (避免过度请求)

## 使用场景

### 开发调试
1. 查看Pod状态变化时，启用describe自动刷新
2. 监控日志输出时，启用日志自动刷新和滚动
3. 观察配置变更时，启用YAML自动刷新

### 生产监控
1. 保持列表自动刷新来监控整体状态
2. 按需启用特定内容的自动刷新
3. 使用 `A` 键暂时禁用所有刷新以减少集群负载

## 快捷键总结

| 按键 | 模式 | 功能 |
|------|------|------|
| `A` | 任意 (非日志) | 切换全局刷新开关 |
| `A` | 日志 | 切换自动滚动 |
| `R` | 日志 | 切换日志自动刷新 |
| `R` | Describe | 切换Describe自动刷新 |
| `R` | YAML | 切换YAML自动刷新 |
| `R` | 其他 | 手动强制刷新当前内容 |

## 状态显示

在命令行底部，你会看到刷新状态信息：
- `[自动刷新: 列表, 日志]` - 显示当前启用的刷新类型
- `[刷新已禁用]` - 全局刷新已关闭
- `[无自动刷新]` - 没有启用任何自动刷新

## 注意事项

1. **性能考虑**: Describe和YAML刷新默认关闭，避免对集群造成过多请求
2. **网络影响**: 在网络较慢的环境中，可以关闭自动刷新减少延迟
3. **资源使用**: 频繁刷新会增加kubectl调用次数，请根据需要调整

## 最佳实践

1. **日常使用**: 保持列表刷新开启，其他按需启用
2. **故障排查**: 启用相关内容的自动刷新来实时监控
3. **演示展示**: 使用自动刷新展示Kubernetes集群的动态变化
4. **资源受限**: 在CI/CD或资源受限环境中关闭自动刷新

通过这些新的动态刷新功能，你可以更好地监控和管理你的Kubernetes集群！